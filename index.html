<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gracie Barra Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    margin: 0;
    background: #c40000;
    color: white;
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;
}
header {
    padding: 10px;
}
header img {
    height: 80px;
}
#timer {
    font-size: 140px;
    font-weight: bold;
    margin: 10px 0;
}
#status {
    font-size: 42px;
}
#round {
    font-size: 32px;
    margin-bottom: 10px;
}
.buttons button, .presets button {
    font-size: 20px;
    padding: 10px 16px;
    margin: 5px;
    border: none;
    border-radius: 8px;
}
.buttons button {
    background: black;
    color: white;
}
.presets button {
    background: white;
    color: #c40000;
    font-weight: bold;
}
.custom {
    margin-top: 15px;
}
.custom input {
    width: 70px;
    font-size: 18px;
    margin: 4px;
    text-align: center;
}
</style>
</head>
<body>

<header>
    <img src="logo-gracie-barra.png" alt="Gracie Barra">
</header>

<div id="round">Round 1 / 1</div>
<div id="status">TREINO</div>
<div id="timer">00:00</div>

<div class="buttons">
    <button onclick="start()">START</button>
    <button onclick="pause()">PAUSE</button>
    <button onclick="reset()">RESET</button>
</div>

<div class="presets" id="presetButtons">
    <button onclick="setPreset(300,120,4)">5x2 (4)</button>
    <button onclick="setPreset(360,120,4)">6x2 (4)</button>
    <button onclick="setPreset(420,120,4)">7x2 (4)</button>
    <button onclick="setPreset(600,120,4)">10x2 (4)</button>
    <button onclick="setPreset(120,40,10)">2x40 (10)</button>
    <button onclick="setPreset(180,60,10)">3x60 (10)</button>
</div>

<div class="custom">
    <h3>Preset personalizado</h3>
    Treino:
    <input id="wMin" type="number" placeholder="min">
    <input id="wSec" type="number" placeholder="seg"><br>
    Descanso:
    <input id="rMin" type="number" placeholder="min">
    <input id="rSec" type="number" placeholder="seg"><br>
    Rounds:
    <input id="roundsInput" type="number"><br>
    <button onclick="createPreset()">Salvar preset</button>
</div>

<audio id="beep" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

<script>
let work=300, rest=120, rounds=1;
let currentRound=1, timeLeft=0;
let phase="TREINO", interval=null;

function setPreset(w,r,ro){
    work=w; rest=r; rounds=ro;
    reset();
}

function createPreset(){
    const w = (+wMin.value||0)*60 + (+wSec.value||0);
    const r = (+rMin.value||0)*60 + (+rSec.value||0);
    const ro = +roundsInput.value||1;
    if(w<=0) return;
    const btn = document.createElement("button");
    btn.innerText = `${Math.floor(w/60)}:${String(w%60).padStart(2,"0")} / ${ro}`;
    btn.onclick = () => setPreset(w,r,ro);
    document.getElementById("presetButtons").appendChild(btn);
}

function start(){
    if(interval) return;
    interval=setInterval(tick,1000);
    loudBeep(1);
}

function pause(){
    clearInterval(interval);
    interval=null;
}

function reset(){
    pause();
    phase="TREINO";
    currentRound=1;
    timeLeft=work;
    update();
}

function tick(){
    timeLeft--;
    if(timeLeft<=10 && timeLeft>0) loudBeep(1);
    if(timeLeft<=0){
        loudBeep(3);
        if(phase==="TREINO"){
            phase="DESCANSO";
            timeLeft=rest;
        } else {
            currentRound++;
            if(currentRound>rounds){
                pause();
                return;
            }
            phase="TREINO";
            timeLeft=work;
        }
    }
    update();
}

function update(){
    status.innerText=phase;
    round.innerText=`Round ${currentRound} / ${rounds}`;
    timer.innerText=
        `${String(Math.floor(timeLeft/60)).padStart(2,"0")}:${String(timeLeft%60).padStart(2,"0")}`;
}

function loudBeep(times){
    for(let i=0;i<times;i++){
        setTimeout(()=>beep.play(), i*200);
    }
}

reset();
</script>

</body>
</html>
